SELECT USER
FROM DUAL;
--==>> TEAM_01


--○ 테이블 생성

-- 관리자 테이블 생성 (ADMIN)
CREATE TABLE ADMIN
( ADMIN_ID    CHAR(10)
, ADMIN_PW    VARCHAR2(20) CONSTRAINT  ADMIN_PW_NN   NOT NULL
, ADMIN_NAME  VARCHAR2(20) CONSTRAINT  ADMIN_NAME_NN   NOT NULL
, CONSTRAINT ADMIN_ID_PK PRIMARY KEY(ADMIN_ID)
);
--==>> Table ADMIN이(가) 생성되었습니다.


-- 교수자 테이블 생성 (TUTOR)
CREATE TABLE TUTOR
( TUTOR_ID           CHAR(10)
, TUTOR_NAME         VARCHAR2(20)  CONSTRAINT  TUTOR_NAME_NN  NOT NULL
, TUTOR_SSN          CHAR(13)      CONSTRAINT  TUTOR_SSN_NN   NOT NULL
, TUTOR_PW           VARCHAR2(20)  CONSTRAINT  TUTOR_PW_NN   NOT NULL
, CONSTRAINT TUTOR_ID_PK PRIMARY KEY(TUTOR_ID)
, CONSTRAINT TUTOR_SSN_UK UNIQUE(TUTOR_SSN)
);
--==>> Table TUTOR이(가) 생성되었습니다.


-- 학생 테이블 생성 (STUDENT)
CREATE TABLE STUDENT
( STUDENT_ID        CHAR(10)
, STUDENT_NAME      VARCHAR2(20)    CONSTRAINT  STUDENT_NAME_NN  NOT NULL
, STUDENT_SSN       CHAR(13)        CONSTRAINT  STUDENT_SSN_NN   NOT NULL
, STUDENT_PW        VARCHAR2(20)    CONSTRAINT  STUDENT_PW_NN   NOT NULL
, CONSTRAINT STUDENT_ID_PK PRIMARY KEY (STUDENT_ID)
, CONSTRAINT STUDENT_SSN_UK UNIQUE(STUDENT_SSN)
);
--==>> Table STUDENT이(가) 생성되었습니다.


-- 과정 테이블 생성 (COURSE)
CREATE TABLE COURSE
( COURSE_ID      VARCHAR2(10)
, COURSE_NAME    VARCHAR2(30)
, CONSTRAINT COURSE_ID_PK PRIMARY KEY(COURSE_ID) 
);
--===>> Table COURSE이(가) 생성되었습니다.


-- 개설과정 테이블 생성 (OPEN_COURSE)
CREATE TABLE OPEN_COURSE
( OPEN_COURSE_ID      VARCHAR2(10)
, COURSE_ID           VARCHAR2(10)  CONSTRAINT OC_COURSE_NN NOT NULL
, COURSE_STARTDATE    DATE  CONSTRAINT  OC_STARTDATE_NN  NOT NULL
, COURSE_ENDDATE      DATE  CONSTRAINT  OC_ENDDATE_NN  NOT NULL
, CONSTRAINT OC_ID_PK PRIMARY KEY(OPEN_COURSE_ID)
);
--==>> Table OPEN_COURSE이(가) 생성되었습니다.


-- 과목 테이블 생성 (SUBJECT)
CREATE TABLE SUBJECT
( SUBJECT_ID    VARCHAR2(10)
, SUBJECT_NAME  VARCHAR2(30)  CONSTRAINT SUBJECT_NAME_NN NOT NULL 
, CONSTRAINT SUBJECT_ID_PK PRIMARY KEY(SUBJECT_ID)
);
--==>> Table SUBJECT이(가) 생성되었습니다.


-- 개설과목 테이블 생성 (OPEN_SUBJECT)
CREATE TABLE OPEN_SUBJECT
( OPEN_SUBJECT_ID       VARCHAR2(10)
, SUBJECT_ID            VARCHAR2(10)    CONSTRAINT OS_SUBJECT_NN NOT NULL
, OPEN_COURSE_ID        VARCHAR2(10)    CONSTRAINT OS_OC_NN NOT NULL
, SUBJECT_STARTDATE     DATE    CONSTRAINT  OS_STARTDATE_NN  NOT NULL
, SUBJECT_ENDDATE       DATE    CONSTRAINT  OS_ENDDATE_NN  NOT NULL
, BOOK_ID               VARCHAR2(10)    CONSTRAINT OS_BOOK_NN NOT NULL
, TUTOR_ID              CHAR(10)        CONSTRAINT OS_TUTOR_NN NOT NULL
, ROOM_ID               VARCHAR2(10)    CONSTRAINT OS_ROOM_NN NOT NULL
, ATTENDANCE_ALLOT      NUMBER(3)
, PRACTICAL_ALLOT       NUMBER(3)
, WRITTEN_ALLOT         NUMBER(3)
, CONSTRAINT OS_ID_PK PRIMARY KEY(OPEN_SUBJECT_ID)
, CONSTRAINT OS_AA_CK CHECK(ATTENDANCE_ALLOT BETWEEN 0 AND 100)
, CONSTRAINT OS_PA_CK CHECK(PRACTICAL_ALLOT BETWEEN 0 AND 100)
, CONSTRAINT OS_WA_CK CHECK(WRITTEN_ALLOT BETWEEN 0 AND 100)
--, CONSTRAINT OS_ALLOT_CK CHECK( (ATTENDANCE_ALLOT + PRACTICAL_ALLOT + WRITTEN_ALLOT) =100 )     -- 이거 제거
, CONSTRAINT OS_DATE_INTERVAL CHECK(SUBJECT_ENDDATE > SUBJECT_STARTDATE)
);
--==>> Table OPEN_SUBJECT이(가) 생성되었습니다.



-- 교재 테이블 생성 (BOOK)
CREATE TABLE BOOK
( BOOK_ID   VARCHAR2(10)
, BOOK_NAME VARCHAR2(30)    CONSTRAINT BOOK_NAME_NN NOT NULL  
, CONSTRAINT BOOK_ID_PK PRIMARY KEY(BOOK_ID)
);
--==>> Table BOOK이(가) 생성되었습니다.


-- 강의실 테이블 생성 (ROOM)
CREATE TABLE ROOM
( ROOM_ID        VARCHAR2(10)
, ROOM_LOCATION  VARCHAR2(40)   CONSTRAINT ROOM_LOC_NN NOT NULL
, CONSTRAINT ROOM_ID_PK PRIMARY KEY(ROOM_ID)
);
--==>> Table ROOM이(가) 생성되었습니다.


-- 수강신청 테이블 생성 (REGISTRATION)
CREATE TABLE REGISTRATION
( REGISTRATION_ID     VARCHAR2(10)
, STUDENT_ID          CHAR(10)      CONSTRAINT REGI_STUDENT_NN NOT NULL
, OPEN_COURSE_ID      VARCHAR2(10)  CONSTRAINT REGI_OC_NN NOT NULL
, REGISTRATION_DATE   DATE DEFAULT SYSDATE  CONSTRAINT REGI_DATE_NN NOT NULL
, CONSTRAINT REGI_ID_PK PRIMARY KEY(REGISTRATION_ID)
);
--==>> Table REGISTRATION이(가) 생성되었습니다.


-- 중도탈락 테이블 생성 (DROPOUT)
CREATE TABLE DROPOUT
( REGISTRATION_ID   VARCHAR2(10)
, DROPOUT_DATE      DATE DEFAULT SYSDATE    CONSTRAINT DROPOUT_DATE_NN NOT NULL
, CONSTRAINT DROP_RID_PK PRIMARY KEY(REGISTRATION_ID)
);
--==>> Table DROPOUT이(가) 생성되었습니다.


-- 성적 테이블 생성 (GRADE)
CREATE TABLE GRADE
( OPEN_SUBJECT_ID          VARCHAR2(10)
, REGISTRATION_ID          VARCHAR2(10) CONSTRAINT GRADE_REGI_NN NOT NULL
, ATTENDANCE_SCORE         NUMBER(3)
, PRACTICAL_SCORE          NUMBER(3)
, WRITTEN_SCORE            NUMBER(3)
, CONSTRAINT GRADE_OS_REGI_PK PRIMARY KEY(OPEN_SUBJECT_ID, REGISTRATION_ID)   --복합 PRIMARY KEY
, CONSTRAINT GRADE_AS_CK CHECK(ATTENDANCE_SCORE BETWEEN 0 AND 100)
, CONSTRAINT GRADE_PS_CK CHECK(PRACTICAL_SCORE BETWEEN 0 AND 100)
, CONSTRAINT GRADE_WS_CK CHECK(WRITTEN_SCORE BETWEEN 0 AND 100)
--, CONSTRAINT GRADE_SCORE_CK CHECK( (ATTENDANCE_SCORE + PRACTICAL_SCORE + WRITTEN_SCORE) <=100 ) -- 이거 제거
);
--==>> Table GRADE이(가) 생성되었습니다.





--○ 테이블 생성 후 제약 조건 추가

-- 수강신청 테이블 제약조건 추가(FK)
ALTER TABLE REGISTRATION
ADD ( CONSTRAINT REGI_STU_FK FOREIGN KEY(STUDENT_ID) REFERENCES STUDENT(STUDENT_ID)
    , CONSTRAINT REGI_OC_FK FOREIGN KEY(OPEN_COURSE_ID) REFERENCES OPEN_COURSE(OPEN_COURSE_ID));
--==>> Table REGISTRATION이(가) 변경되었습니다.    


-- 중도탈락 테이블 제약조건 추가(FK)
ALTER TABLE DROPOUT
ADD CONSTRAINT DROP_RID_FK FOREIGN KEY(REGISTRATION_ID)
               REFERENCES REGISTRATION(REGISTRATION_ID);
--==>> Table DROPOUT이(가) 변경되었습니다.


-- 개설과정 테이블 제약조건 추가(FK)
ALTER TABLE OPEN_COURSE
ADD CONSTRAINT OC_COURSE_FK FOREIGN KEY(COURSE_ID)
               REFERENCES COURSE(COURSE_ID);
--==>> Table OPEN_COURSE이(가) 변경되었습니다.


-- 성적 테이블 제약조건 추가(FK)
ALTER TABLE GRADE
ADD ( CONSTRAINT GRADE_OS_FK FOREIGN KEY(OPEN_SUBJECT_ID) REFERENCES OPEN_SUBJECT(OPEN_SUBJECT_ID)
    , CONSTRAINT GRADE_REGI_FK FOREIGN KEY(REGISTRATION_ID) REFERENCES REGISTRATION(REGISTRATION_ID));
--==>> Table GRADE이(가) 변경되었습니다.    


-- 개설과목 테이블 제약조건 추가 (FK)
ALTER TABLE OPEN_SUBJECT
ADD ( CONSTRAINT OS_SUBJECT_FK FOREIGN KEY(SUBJECT_ID) REFERENCES SUBJECT(SUBJECT_ID)
    , CONSTRAINT OS_OC_FK FOREIGN KEY(OPEN_COURSE_ID) REFERENCES OPEN_COURSE(OPEN_COURSE_ID)
    , CONSTRAINT OS_BOOK_FK FOREIGN KEY(BOOK_ID) REFERENCES BOOK(BOOK_ID)
    , CONSTRAINT OS_TUTOR_FK FOREIGN KEY(TUTOR_ID) REFERENCES TUTOR(TUTOR_ID)
    , CONSTRAINT OS_ROOM_FK FOREIGN KEY(ROOM_ID) REFERENCES ROOM(ROOM_ID));
--==>> Table OPEN_SUBJECT이(가) 변경되었습니다.


/*
ALTER TABLE TUTOR
MODIFY TUTOR_PW DEFAULT SUBSTR(TUTOR_SSN,7);
--==>> Table TUTOR이(가) 변경되었습니다.

ALTER TABLE TUTOR
DROP COLUMN TUTOR_PW;

ALTER TABLE TUTOR
ADD TUTOR_PW  VARCHAR2(20)  CONSTRAINT  TUTOR_PW_NN   NOT NULL;
*/

SELECT *
FROM USER_TABLES;
SELECT *
FROM USER_TRIGGERS;


/*
-- 개설과목 테이블의 제약조건 제거(OS_ALLOT_CK)
ALTER TABLE OPEN_SUBJECT
DROP CONSTRAINT OS_ALLOT_CK;
--==>> Table OPEN_SUBJECT이(가) 변경되었습니다.

-- 성적 테이블의 제약조건 제거(GRADE_SCORE_CK)
ALTER TABLE GRADE
DROP CONSTRAINT GRADE_SCORE_CK;
--==>> Table GRADE이(가) 변경되었습니다.
*/



----------------------------------------------------------------------------------------


--○ 각 학생이 수강신청한 모든 과정의 모든 과목의 성적 조회(통합) 뷰
CREATE OR REPLACE VIEW VIEW_GRADE
AS
SELECT FN_STUDENT_NAME(R.STUDENT_ID)"학생명", R.OPEN_COURSE_ID"개설과정ID", FN_COURSE_NAME(R.OPEN_COURSE_ID)"과정명"
     , G.OPEN_SUBJECT_ID"개설과목ID", FN_SUBJECT_NAME(G.OPEN_SUBJECT_ID)"과목명"
     , FN_OS_STDATE(G.OPEN_SUBJECT_ID)"과목시작일", FN_OS_ENDDATE(G.OPEN_SUBJECT_ID)"과목종료일"
     , FN_BOOK_NAME(G.OPEN_SUBJECT_ID)"교재명", G.ATTENDANCE_SCORE "출결", G.PRACTICAL_SCORE "실기", G.WRITTEN_SCORE "필기"
     , (G.ATTENDANCE_SCORE + G.PRACTICAL_SCORE + G.WRITTEN_SCORE) "총점"
     , RANK() OVER(PARTITION BY G.OPEN_SUBJECT_ID ORDER BY (G.ATTENDANCE_SCORE + G.PRACTICAL_SCORE + G.WRITTEN_SCORE))"등수"
FROM REGISTRATION R JOIN GRADE G
ON R.REGISTRATION_ID = G.REGISTRATION_ID;
--==>> View VIEW_GRADE이(가) 생성되었습니다.


-- 뷰를 통해 해당 학생이 수강완료한 과목(목록) 조회

SELECT "개설과목ID", "과목명"
FROM VIEW_GRADE
WHERE "학생명" = FN_STUDENT_NAME('S211001')
 AND "과목종료일" < SYSDATE;
--==>>
/*
21-0011	자바
21-0012	오라클
21-0013	HTML
21-0014	스프링
*/


-- 뷰를 통해 해당 학생(로그인 중인 학생)이 선택한 과목의 성적 정보만을 조회 ★ 등수
SELECT *
FROM VIEW_GRADE
WHERE "개설과목ID" = '21-0012'
  AND "학생명" = FN_STUDENT_NAME('S211001');
--==>>
/*
김진령	21-001	개발자	21-0012	오라클	2021-02-01	2021-02-28	오라클의정석	20	35	35	90	1
*/

SELECT *
FROM VIEW_GRADE
WHERE "개설과목ID" = '21-0012'
  AND "학생명" = FN_STUDENT_NAME('S211003');


-- 뷰를 통해 해당 학생이 수강신청한 모든 과정의 모든 과목의 성적 조회(통합)
SELECT *
FROM VIEW_GRADE
WHERE "학생명" = FN_STUDENT_NAME('S211002')
  AND "과목종료일" < SYSDATE;
--==>>
/*
박효빈	21-003	개발자	21-0031	자바	2021-05-01	2021-05-31	초보디자인1	    10	45	40	95	1
박효빈	21-003	개발자	21-0032	오라클	2021-06-01	2021-06-30	자바의정석	    19	36	40	95	1
박효빈	21-003	개발자	21-0033	HTML	2021-07-01	2021-07-31	오라클의정석	23	37	32	92	1
*/


-- 교수자가 담당 과목의 학생들 성적 조회
-- 과목명, 과목기간, 교재명, 학생명, 출결, 실기, 필기, 총점, 등수
SELECT "과목명", "과목시작일", "과목종료일", "교재명", "학생명", "출결", "실기", "필기", "총점", "등수"
FROM VIEW_GRADE
WHERE "과목명" IN (SELECT FN_SUBJECT_NAME(OPEN_SUBJECT_ID)
                   FROM OPEN_SUBJECT
                   WHERE TUTOR_ID = 'T101');
--==>>
/*
자바	2021-01-01	2021-01-31	자바의정석	김진령	10	40	43	93	1
HTML	2021-03-01	2021-03-31	HTML의정석	김진령	25	40	34	99	1
스프링	2021-04-01	2021-04-30	스프링의정석	김진령	30	38	30	98	1
자바	2021-05-01	2021-05-31	초보디자인1	박효빈	10	45	40	95	1
HTML	2021-07-01	2021-07-31	오라클의정석	박효빈	23	37	32	92	1
자바	2021-01-01	2021-01-31	자바의정석	손범석	8	32	42	82	1
HTML	2021-03-01	2021-03-31	HTML의정석	손범석	23	36	34	93	1
스프링	2021-04-01	2021-04-30	스프링의정석	손범석	27	37	23	87	1
자바	2021-05-01	2021-05-31	초보디자인1	이윤서	9	43	45	97	1
HTML	2021-07-01	2021-07-31	오라클의정석	이윤서	22	39	33	94	1
스프링	2021-08-01	2021-09-30	HTML의정석	이윤서	26	32	30	88	1
자바	2021-01-01	2021-01-31	자바의정석	이중호	10	43	45	98	1
HTML	2021-03-01	2021-03-31	HTML의정석	이중호	23	37	31	91	1
스프링	2021-04-01	2021-04-30	스프링의정석	이중호	30	36	27	93	1
자바	2021-05-01	2021-05-31	초보디자인1	최수지	10	45	45	100	1
HTML	2021-07-01	2021-07-31	오라클의정석	최수지	21	35	33	89	1
스프링	2021-08-01	2021-09-30	HTML의정석	최수지	27	37	26	90	1
*/


------------------------------------------------------------------------------------



--○ 모든 과목, 과정, 교수자를 조회하는 뷰 생성
CREATE OR REPLACE VIEW VIEW_ADMIN_ALL
AS
SELECT FN_TUTOR_NAME(TUTOR_ID) "교수자명", OPEN_COURSE_ID"개설과정ID", FN_COURSE_NAME(OPEN_COURSE_ID)"과정명"
     , OPEN_SUBJECT_ID"개설과목ID", FN_SUBJECT_NAME(OPEN_SUBJECT_ID)"과목명"
     , FN_OS_STDATE(OPEN_SUBJECT_ID)"과목시작일", FN_OS_ENDDATE(OPEN_SUBJECT_ID)"과목종료일"
     , FN_BOOK_NAME(OPEN_SUBJECT_ID)"교재명", FN_ROOM_LOC(OPEN_SUBJECT_ID)"강의실"
     , FN_SUBJECT_CHECK(OPEN_SUBJECT_ID) "강의진행여부"
FROM OPEN_SUBJECT;
--==>> View VIEW_ADMIN_ALL이(가) 생성되었습니다.


-- 뷰를 이용해 관리자가 모든 교수자 정보 조회
SELECT "교수자명", "과목명", "과목시작일", "과목종료일", "교재명", "강의실", "강의진행여부"
FROM VIEW_ADMIN_ALL;
--==>>
/*
고민영	자바	2021-01-01	2021-01-31	자바의정석	A동 101 강의실	강의 종료
최민영	오라클	2021-02-01	2021-02-28	오라클의정석	A동 201 강의실	강의 종료
박민영	HTML	2021-03-01	2021-03-31	HTML의정석	F동 502 강의실	강의 종료
고민영	스프링	2021-04-01	2021-04-30	스프링의정석	F동 201 강의실	강의 종료
최민영	자바	2021-05-01	2021-05-31	초보디자인1	F동 102 강의실	강의 종료
박민영	오라클	2021-06-01	2021-06-30	자바의정석	A동 101 강의실	강의 종료
고민영	HTML	2021-07-01	2021-07-31	오라클의정석	A동 201 강의실	강의 종료
최민영	스프링	2021-08-01	2021-09-30	HTML의정석	F동 502 강의실	강의 중
김민재	디자인툴1	2021-01-01	2021-01-31	초보디자인1	A동 201 강의실	강의 종료
강민재	디자인툴2	2021-02-01	2021-02-28	초보디자인2	F동 502 강의실	강의 종료
이민재	디자인툴3	2021-03-01	2021-03-31	초보디자인3	F동 201 강의실	강의 종료
김민재	디자인툴4	2021-04-01	2021-04-30	초보디자인4	F동 102 강의실	강의 종료
강민재	디자인툴4	2021-05-01	2021-05-31	초보디자인1	A동 101 강의실	강의 종료
이민재	디자인툴4	2021-06-01	2021-06-30	초보디자인2	A동 201 강의실	강의 종료
김민재	디자인툴4	2021-07-01	2021-07-31	초보디자인3	F동 502 강의실	강의 종료
강민재	디자인툴4	2021-08-01	2021-09-30	초보디자인4	F동 201 강의실	강의 중
*/

-- 뷰를 이용해 관리자가 모든 과정 정보 조회
SELECT "과정명", "강의실", "과목명", "과목시작일", "과목종료일", "교재명", "교수자명"
FROM VIEW_ADMIN_ALL;

-- 뷰를 이용해 관리자가 모든 과목 정보 조회
SELECT "과정명", "강의실", "과목명", "과목시작일", "과목종료일", "교재명", "교수자명"
FROM VIEW_ADMIN_ALL;

/*
SELECT *
FROM ALL_PROCEDURES
WHERE PROCEDURE_NAME='PRC_MEMBER_INSERT';
*/



---------------------------------------------------------------------------------

--○ 모든 과정, 모든 학생의 통합 중도탈락자 조회 뷰
-- 개설과정ID, 과정명, 학생ID, 학생명, 중도탈락일
CREATE OR REPLACE VIEW VIEW_DROPOUT
AS
SELECT (SELECT OPEN_COURSE_ID
        FROM REGISTRATION R
        WHERE R.REGISTRATION_ID = D.REGISTRATION_ID) "개설과정ID"
     , (SELECT FN_COURSE_NAME(OPEN_COURSE_ID)
        FROM REGISTRATION R
        WHERE R.REGISTRATION_ID = D.REGISTRATION_ID) "과정명"
     , (SELECT STUDENT_ID
        FROM REGISTRATION R
        WHERE R.REGISTRATION_ID = D.REGISTRATION_ID) "학생ID"
     , (SELECT FN_STUDENT_NAME(STUDENT_ID)
        FROM REGISTRATION R
        WHERE R.REGISTRATION_ID = D.REGISTRATION_ID) "학생명"
     , DROPOUT_DATE "중도탈락일"
FROM DROPOUT D;
--==>> View VIEW_DROPOUT이(가) 생성되었습니다.


-- 뷰를 이용해 관리자가 중도탈락 정보 확인
SELECT "개설과정ID", "과정명", "학생명", "중도탈락일" 
FROM VIEW_DROPOUT;
--==>>
/*
21-003	개발자	    박효빈	2021-08-09
21-004	디자이너	김예진	2021-08-07
*/


-- 뷰를 이용해 교수자가 과목별 중도탈락학생 정보 확인 
SELECT "학생명", "과정명", "중도탈락일"
FROM VIEW_DROPOUT
WHERE "개설과정ID" = (SELECT OPEN_COURSE_ID
                      FROM OPEN_SUBJECT
                      WHERE OPEN_SUBJECT_ID = '21-0034');
--==>>
/*
박효빈	개발자	2021-08-09
*/


-- 뷰를 이용해 학생이 자신의 중도탈락 정보 확인
SELECT "과정명", "중도탈락일"
FROM VIEW_DROPOUT
WHERE "학생ID" = 'S211002';
--==>>
/*
개발자	2021-08-09
*/


--------------------------------------------------------------------------------

--○ 데이터 입력

-- 관리자
INSERT INTO ADMIN(ADMIN_ID, ADMIN_PW, ADMIN_NAME) VALUES('A1', '1111', '관리자1');
INSERT INTO ADMIN(ADMIN_ID, ADMIN_PW, ADMIN_NAME) VALUES('A2', '2222', '관리자2');
INSERT INTO ADMIN(ADMIN_ID, ADMIN_PW, ADMIN_NAME) VALUES('A3', '3333', '관리자3');
--==>> 1 행 이(가) 삽입되었습니다. * 3

-- 교수자
EXEC PRC_TUTOR_INSERT('T101', '고민영', '8012122123456');
EXEC PRC_TUTOR_INSERT('T102', '최민영', '9009092345678');   
EXEC PRC_TUTOR_INSERT('T103', '박민영', '8808082234567');   
EXEC PRC_TUTOR_INSERT('T104', '김민재', '8506061234567');  
EXEC PRC_TUTOR_INSERT('T105', '강민재', '8303031234567');   
EXEC PRC_TUTOR_INSERT('T106', '이민재', '8402211234567');   
--==>> PL/SQL 프로시저가 성공적으로 완료되었습니다. * 6

SELECT *
FROM TUTOR;
--==>>
/*
T101      	고민영	8012122123456	2123456
T103      	박민영	8808082234567	2234567
T102      	최민영	9009092345678	2345678
T104      	김민재	8506061234567	1234567
T105      	강민재	8303031234567	1234567
T106      	이민재	8402211234567	1234567
*/


-- 학생
EXEC PRC_STUDENT_INSERT('S211001', '김진령', '9701012345678');  
EXEC PRC_STUDENT_INSERT('S211002', '박효빈', '9701022456789');  
EXEC PRC_STUDENT_INSERT('S211003', '손범석', '9602021234567');  
EXEC PRC_STUDENT_INSERT('S211004', '이윤서', '9503032567891');  
EXEC PRC_STUDENT_INSERT('S211005', '이중호', '9702031345678');  
EXEC PRC_STUDENT_INSERT('S211006', '최수지', '9605042053014');  
EXEC PRC_STUDENT_INSERT('S211011', '홍길동', '0011013456789');  
EXEC PRC_STUDENT_INSERT('S211012', '고길동', '0105053567891'); 
EXEC PRC_STUDENT_INSERT('S211013', '손예진', '0107074567891'); 
EXEC PRC_STUDENT_INSERT('S211014', '김예진', '9808082123456');  
--==>> PL/SQL 프로시저가 성공적으로 완료되었습니다.* 10

SELECT *
FROM STUDENT;
--==>>
/*
S211001   	김진령	9701012345678	2345678
S211002   	박효빈	9701022456789	2456789
S211003   	손범석	9602021234567	1234567
S211004   	이윤서	9503032567891	2567891
S211005   	이중호	9702031345678	1345678
S211006   	최수지	9605042053014	2053014
S211011   	홍길동	0011013456789	3456789
S211012   	고길동	0105053567891	3567891
S211013   	손예진	0107074567891	4567891
S211014   	김예진	9808082123456	2123456
*/

-- 과정
INSERT INTO COURSE(COURSE_ID, COURSE_NAME) VALUES('C10', '개발자');
INSERT INTO COURSE(COURSE_ID, COURSE_NAME) VALUES('C20', '디자이너');
--==>> 1 행 이(가) 삽입되었습니다. * 2

SELECT *
FROM COURSE;
--==>> 
/*
C10	개발자
C20	디자이너
*/

-- 과목
INSERT INTO SUBJECT(SUBJECT_ID, SUBJECT_NAME) VALUES('SB1001', '자바');        --개발자
INSERT INTO SUBJECT(SUBJECT_ID, SUBJECT_NAME) VALUES('SB1002', '오라클');      --개발자
INSERT INTO SUBJECT(SUBJECT_ID, SUBJECT_NAME) VALUES('SB1003', 'HTML');        --개발자
INSERT INTO SUBJECT(SUBJECT_ID, SUBJECT_NAME) VALUES('SB1004', '스프링');      --개발자
INSERT INTO SUBJECT(SUBJECT_ID, SUBJECT_NAME) VALUES('SB2001', '디자인툴1');   --디자이너
INSERT INTO SUBJECT(SUBJECT_ID, SUBJECT_NAME) VALUES('SB2002', '디자인툴2');   --디자이너
INSERT INTO SUBJECT(SUBJECT_ID, SUBJECT_NAME) VALUES('SB2003', '디자인툴3');   --디자이너
INSERT INTO SUBJECT(SUBJECT_ID, SUBJECT_NAME) VALUES('SB2004', '디자인툴4');   --디자이너
--==>> 1 행 이(가) 삽입되었습니다. * 8

SELECT *
FROM SUBJECT;
--==>>
/*
SB1001	자바
SB1002	오라클
SB1003	HTML
SB1004	스프링
SB2001	디자인툴1
SB2002	디자인툴2
SB2003	디자인툴3
SB2004	디자인툴4
*/

-- 교재
INSERT INTO BOOK(BOOK_ID, BOOK_NAME) VALUES('B001', '자바의정석');         --개발자
INSERT INTO BOOK(BOOK_ID, BOOK_NAME) VALUES('B002', '오라클의정석');       --개발자
INSERT INTO BOOK(BOOK_ID, BOOK_NAME) VALUES('B003', 'HTML의정석');         --개발자
INSERT INTO BOOK(BOOK_ID, BOOK_NAME) VALUES('B004', '스프링의정석');       --개발자
INSERT INTO BOOK(BOOK_ID, BOOK_NAME) VALUES('B005', '초보디자인1');        --디자이너
INSERT INTO BOOK(BOOK_ID, BOOK_NAME) VALUES('B006', '초보디자인2');        --디자이너
INSERT INTO BOOK(BOOK_ID, BOOK_NAME) VALUES('B007', '초보디자인3');        --디자이너
INSERT INTO BOOK(BOOK_ID, BOOK_NAME) VALUES('B008', '초보디자인4');        --디자이너
--==>> 1 행 이(가) 삽입되었습니다. * 8

SELECT *
FROM BOOK;
--==>>
/*
B001	자바의정석
B002	오라클의정석
B003	HTML의정석
B004	스프링의정석
B005	초보디자인1
B006	초보디자인2
B007	초보디자인3
B008	초보디자인4
*/

-- 강의실
INSERT INTO ROOM(ROOM_ID, ROOM_LOCATION) VALUES('100', 'A동 101 강의실'); 
INSERT INTO ROOM(ROOM_ID, ROOM_LOCATION) VALUES('110', 'A동 201 강의실');
INSERT INTO ROOM(ROOM_ID, ROOM_LOCATION) VALUES('120', 'F동 502 강의실');
INSERT INTO ROOM(ROOM_ID, ROOM_LOCATION) VALUES('130', 'F동 201 강의실');
INSERT INTO ROOM(ROOM_ID, ROOM_LOCATION) VALUES('140', 'F동 102 강의실');
--==>> 1 행 이(가) 삽입되었습니다. * 5

SELECT *
FROM ROOM;
--==>>
/*
100	A동 101 강의실
110	A동 201 강의실
120	F동 502 강의실
130	F동 201 강의실
140	F동 102 강의실
*/



-- 개설과정
INSERT INTO OPEN_COURSE(OPEN_COURSE_ID, COURSE_ID, COURSE_STARTDATE, COURSE_ENDDATE) 
VALUES('21-001', 'C10', TO_DATE('2021-01-01', 'YYYY-MM-DD'), TO_DATE('2021-04-30', 'YYYY-MM-DD'));   -- 개발자 양성과정 A
INSERT INTO OPEN_COURSE(OPEN_COURSE_ID, COURSE_ID, COURSE_STARTDATE, COURSE_ENDDATE) 
VALUES('21-002', 'C20', TO_DATE('2021-01-01',  'YYYY-MM-DD'), TO_DATE('2021-04-30', 'YYYY-MM-DD'));     -- 디자이너 양성과정 A
INSERT INTO OPEN_COURSE(OPEN_COURSE_ID, COURSE_ID, COURSE_STARTDATE, COURSE_ENDDATE) 
VALUES('21-003', 'C10', TO_DATE('2021-05-01', 'YYYY-MM-DD'),  TO_DATE('2021-09-30', 'YYYY-MM-DD'));     -- 개발자 양성과정 B
INSERT INTO OPEN_COURSE(OPEN_COURSE_ID, COURSE_ID, COURSE_STARTDATE, COURSE_ENDDATE) 
VALUES('21-004', 'C20', TO_DATE('2021-05-01',  'YYYY-MM-DD'), TO_DATE('2021-09-30', 'YYYY-MM-DD'));     -- 디자이너 양성과정 B
--==>> 1 행 이(가) 삽입되었습니다.


SELECT *
FROM OPEN_COURSE;
--==>>
/*
21-001	C10	2021-01-01	2021-04-30
21-002	C20	2021-01-01	2021-04-30
21-003	C10	2021-05-01	2021-09-30
21-004	C20	2021-05-01	2021-09-30
*/



-- 개설과목
--개설과목(개설과목ID, 과목ID, 개설과정ID, 시작일, 종료일, 교재ID, 교수자ID, 강의실ID [, 출결배점, 실기배점, 필기배점])
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0011', 'SB1001', '21-001', TO_DATE('2021-01-01', 'YYYY-MM-DD'), TO_DATE('2021-01-31', 'YYYY-MM-DD'), 'B001', 'T101', '100');   --개발자양성과정A
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0012', 'SB1002', '21-001', TO_DATE('2021-02-01', 'YYYY-MM-DD'), TO_DATE('2021-02-28', 'YYYY-MM-DD'), 'B002', 'T102', '110');   --개발자양성과정A
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0013', 'SB1003', '21-001', TO_DATE('2021-03-01', 'YYYY-MM-DD'), TO_DATE('2021-03-31', 'YYYY-MM-DD'), 'B003', 'T103', '120');   --개발자양성과정A
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0014', 'SB1004', '21-001', TO_DATE('2021-04-01', 'YYYY-MM-DD'), TO_DATE('2021-04-30', 'YYYY-MM-DD'), 'B004', 'T101', '130');   --개발자양성과정A
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0031', 'SB1001', '21-003', TO_DATE('2021-05-01','YYYY-MM-DD'), TO_DATE('2021-05-31','YYYY-MM-DD'), 'B005', 'T102', '140');   --개발자양성과정B
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0032', 'SB1002', '21-003', TO_DATE('2021-06-01','YYYY-MM-DD'), TO_DATE('2021-06-30','YYYY-MM-DD'), 'B001', 'T103', '100');   --개발자양성과정B
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0033', 'SB1003', '21-003', TO_DATE('2021-07-01','YYYY-MM-DD'), TO_DATE('2021-07-31','YYYY-MM-DD'), 'B002', 'T101', '110');   --개발자양성과정B
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0034', 'SB1004', '21-003', TO_DATE('2021-08-01','YYYY-MM-DD'), TO_DATE('2021-09-30','YYYY-MM-DD'), 'B003', 'T102', '120');   --개발자양성과정B  --종료일 수정 '21-09-30'
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0021', 'SB2001', '21-002', TO_DATE('2021-01-01', 'YYYY-MM-DD'), TO_DATE('2021-01-31', 'YYYY-MM-DD'), 'B005', 'T104', '110');   --디자이너양성과정A
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0022', 'SB2002', '21-002', TO_DATE('2021-02-01', 'YYYY-MM-DD'), TO_DATE('2021-02-28', 'YYYY-MM-DD'), 'B006', 'T105', '120');   --디자이너양성과정A
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0023', 'SB2003', '21-002', TO_DATE('2021-03-01', 'YYYY-MM-DD'), TO_DATE('2021-03-31', 'YYYY-MM-DD'), 'B007', 'T106', '130');   --디자이너양성과정A
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0024', 'SB2004', '21-002', TO_DATE('2021-04-01', 'YYYY-MM-DD'), TO_DATE('2021-04-30', 'YYYY-MM-DD'), 'B008', 'T104', '140');   --디자이너양성과정A
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0041', 'SB2004', '21-004', TO_DATE('2021-05-01', 'YYYY-MM-DD'), TO_DATE('2021-05-31', 'YYYY-MM-DD'), 'B005', 'T105', '100');   --디자이너양성과정B
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0042', 'SB2004', '21-004', TO_DATE('2021-06-01', 'YYYY-MM-DD'), TO_DATE('2021-06-30', 'YYYY-MM-DD'), 'B006', 'T106', '110');   --디자이너양성과정B
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0043', 'SB2004', '21-004', TO_DATE('2021-07-01', 'YYYY-MM-DD'), TO_DATE('2021-07-31', 'YYYY-MM-DD'), 'B007', 'T104', '120');   --디자이너양성과정B
INSERT INTO OPEN_SUBJECT(OPEN_SUBJECT_ID, SUBJECT_ID, OPEN_COURSE_ID, SUBJECT_STARTDATE, SUBJECT_ENDDATE, BOOK_ID, TUTOR_ID, ROOM_ID)
VALUES('21-0044', 'SB2004', '21-004', TO_DATE('2021-08-01', 'YYYY-MM-DD'), TO_DATE('2021-09-30', 'YYYY-MM-DD'), 'B008', 'T105', '130');   --디자이너양성과정B --종료일 수정  '21-09-30'
--==>> 1 행 이(가) 삽입되었습니다. * 16

SELECT *
FROM OPEN_SUBJECT;
--==>>
/*
21-0011	SB1001	21-001	2021-01-01	2021-01-31	B001	T101      	100	10	45	45
21-0012	SB1002	21-001	2021-02-01	2021-02-28	B002	T102      	110	20	40	40
21-0013	SB1003	21-001	2021-03-01	2021-03-31	B003	T103      	120	25	40	35
21-0014	SB1004	21-001	2021-04-01	2021-04-30	B004	T101      	130	30	40	30
21-0031	SB1001	21-003	2021-05-01	2021-05-31	B005	T102      	140	10	45	45
21-0032	SB1002	21-003	2021-06-01	2021-06-30	B001	T103      	100	20	40	40
21-0033	SB1003	21-003	2021-07-01	2021-07-31	B002	T101      	110	25	40	35
21-0034	SB1004	21-003	2021-08-01	2021-09-30	B003	T102      	120	30	40	30
21-0021	SB2001	21-002	2021-01-01	2021-01-31	B005	T104      	110	10	45	45
21-0022	SB2002	21-002	2021-02-01	2021-02-28	B006	T105      	120	20	40	40
21-0023	SB2003	21-002	2021-03-01	2021-03-31	B007	T106      	130	25	40	35
21-0024	SB2004	21-002	2021-04-01	2021-04-30	B008	T104      	140	30	40	30
21-0041	SB2004	21-004	2021-05-01	2021-05-31	B005	T105      	100	10	45	45
21-0042	SB2004	21-004	2021-06-01	2021-06-30	B006	T106      	110	20	40	40
21-0043	SB2004	21-004	2021-07-01	2021-07-31	B007	T104      	120	25	40	35
21-0044	SB2004	21-004	2021-08-01	2021-09-30	B008	T105      	130	30	40	30	
*/



-- 수강신청(등록)
--등록/수강신청(등록ID, 학생ID, 개설과정ID, 등록일)
INSERT INTO REGISTRATION(REGISTRATION_ID, STUDENT_ID, OPEN_COURSE_ID, REGISTRATION_DATE) 
VALUES('R10001', 'S211001', '21-001', TO_DATE('2020-12-20','YYYY-MM-DD'));      -- 개발자양성과정A
INSERT INTO REGISTRATION(REGISTRATION_ID, STUDENT_ID, OPEN_COURSE_ID, REGISTRATION_DATE) 
VALUES('R10002', 'S211002', '21-003',  TO_DATE('2021-04-16','YYYY-MM-DD'));      -- 개발자양성과정B
INSERT INTO REGISTRATION(REGISTRATION_ID, STUDENT_ID, OPEN_COURSE_ID, REGISTRATION_DATE) 
VALUES('R10003', 'S211003', '21-001',  TO_DATE('2020-12-05','YYYY-MM-DD'));      -- 개발자양성과정A
INSERT INTO REGISTRATION(REGISTRATION_ID, STUDENT_ID, OPEN_COURSE_ID, REGISTRATION_DATE) 
VALUES('R10004', 'S211004', '21-003',  TO_DATE('2021-04-12','YYYY-MM-DD'));      -- 개발자양성과정B
INSERT INTO REGISTRATION(REGISTRATION_ID, STUDENT_ID, OPEN_COURSE_ID, REGISTRATION_DATE) 
VALUES('R10005', 'S211005', '21-001',  TO_DATE('2020-12-03','YYYY-MM-DD'));      -- 개발자양성과정A
INSERT INTO REGISTRATION(REGISTRATION_ID, STUDENT_ID, OPEN_COURSE_ID, REGISTRATION_DATE) 
VALUES('R10006', 'S211006', '21-003',  TO_DATE('2021-04-01','YYYY-MM-DD'));      -- 개발자양성과정B
INSERT INTO REGISTRATION(REGISTRATION_ID, STUDENT_ID, OPEN_COURSE_ID, REGISTRATION_DATE) 
VALUES('R10007', 'S211011', '21-002',  TO_DATE('2020-12-21','YYYY-MM-DD'));      -- 디자이너양성과정A
INSERT INTO REGISTRATION(REGISTRATION_ID, STUDENT_ID, OPEN_COURSE_ID, REGISTRATION_DATE) 
VALUES('R10008', 'S211012', '21-004',  TO_DATE('2021-04-25','YYYY-MM-DD'));      -- 디자이너양성과정B
INSERT INTO REGISTRATION(REGISTRATION_ID, STUDENT_ID, OPEN_COURSE_ID, REGISTRATION_DATE) 
VALUES('R10009', 'S211013', '21-002',  TO_DATE('2020-12-15','YYYY-MM-DD'));      -- 디자이너양성과정A
INSERT INTO REGISTRATION(REGISTRATION_ID, STUDENT_ID, OPEN_COURSE_ID, REGISTRATION_DATE) 
VALUES('R10010', 'S211014', '21-004',  TO_DATE('2021-04-07','YYYY-MM-DD'));      -- 디자이너양성과정B
--==>> 1 행 이(가) 삽입되었습니다. * 10

SELECT *
FROM REGISTRATION;
--==>>
/*
R10001	S211001   	21-001	2020-12-20
R10002	S211002   	21-003	2021-04-16
R10003	S211003   	21-001	2020-12-05
R10004	S211004   	21-003	2021-04-12
R10005	S211005   	21-001	2021-12-03
R10006	S211006   	21-003	2021-04-01
R10007	S211011   	21-002	2020-12-21
R10008	S211012   	21-004	2021-04-25
R10009	S211013   	21-002	2020-12-15
R10010	S211014   	21-004	2021-04-07
*/

-- 성적테이블 확인(TRG_REGI_INSERT 작동 확인)
SELECT *
FROM GRADE;
--==>>
/*
21-0011	R10001			
21-0012	R10001			
21-0013	R10001			
21-0014	R10001			
21-0031	R10002			
21-0032	R10002			
21-0033	R10002			
21-0034	R10002			
21-0011	R10003			
21-0012	R10003			
21-0013	R10003			
21-0014	R10003			
21-0031	R10004			
21-0032	R10004			
21-0033	R10004			
21-0034	R10004			
21-0011	R10005			
21-0012	R10005			
21-0013	R10005			
21-0014	R10005			
21-0031	R10006			
21-0032	R10006			
21-0033	R10006			
21-0034	R10006			
21-0021	R10007			
21-0022	R10007			
21-0023	R10007			
21-0024	R10007			
21-0041	R10008			
21-0042	R10008			
21-0043	R10008			
21-0044	R10008			
21-0021	R10009			
21-0022	R10009			
21-0023	R10009			
21-0024	R10009			
21-0041	R10010			
21-0042	R10010			
21-0043	R10010			
21-0044	R10010			
*/


-- 중도탈락
INSERT INTO DROPOUT(REGISTRATION_ID, DROPOUT_DATE) 
VALUES('R10002', TO_DATE('2021-08-09', 'YYYY-MM-DD'));      -- 개발자양성과정B
--==>> 1 행 이(가) 삽입되었습니다.
INSERT INTO DROPOUT(REGISTRATION_ID, DROPOUT_DATE) 
VALUES('R10010', TO_DATE('2021-08-07', 'YYYY-MM-DD'));      -- 디자이너양성과정B
--==>> 1 행 이(가) 삽입되었습니다.

SELECT *
FROM DROPOUT;
--==>>
/*
1 행 이(가) 삽입되었습니다.
*/

-- 성적테이블 확인(TRG_DROPOUT_INSERT 작동확인)
SELECT *
FROM GRADE
WHERE REGISTRATION_ID = 'R10002';
--==>>
/*
21-0031	R10002			
21-0032	R10002			
21-0033	R10002			
*/

SELECT *
FROM GRADE
WHERE REGISTRATION_ID = 'R10010';
--==>>
/*
21-0041	R10010			
21-0042	R10010			
21-0043	R10010			
*/

-- 성적배점입력(개설과목 UPDATE) - 윤서
-- 개발자 양성과정 A
EXEC PRC_ALLOT_UPDATE('21-0011', 10, 45, 45);
EXEC PRC_ALLOT_UPDATE('21-0012', 20, 40, 40);
EXEC PRC_ALLOT_UPDATE('21-0013', 25, 40, 35);
EXEC PRC_ALLOT_UPDATE('21-0014', 30, 40, 30);
-- 개발자 양성과정 B
EXEC PRC_ALLOT_UPDATE('21-0031', 10, 45, 45);
EXEC PRC_ALLOT_UPDATE('21-0032', 20, 40, 40);
EXEC PRC_ALLOT_UPDATE('21-0033', 25, 40, 35);
EXEC PRC_ALLOT_UPDATE('21-0034', 30, 40, 30);
-- 디자이너 양성과정 A
EXEC PRC_ALLOT_UPDATE('21-0021', 10, 45, 45);
EXEC PRC_ALLOT_UPDATE('21-0022', 20, 40, 40);
EXEC PRC_ALLOT_UPDATE('21-0023', 25, 40, 35);
EXEC PRC_ALLOT_UPDATE('21-0024', 30, 40, 30);
-- 디자이너 양성과정 B
EXEC PRC_ALLOT_UPDATE('21-0041', 10, 45, 45);
EXEC PRC_ALLOT_UPDATE('21-0042', 20, 40, 40);
EXEC PRC_ALLOT_UPDATE('21-0043', 25, 40, 35);
EXEC PRC_ALLOT_UPDATE('21-0044', 30, 40, 30);

-- 배점 입력 확인
SELECT *
FROM OPEN_SUBJECT;
--==>>
/*
21-0011	SB1001	21-001	2021-01-01	2021-01-31	B001	T101      	100	10	45	45
21-0012	SB1002	21-001	2021-02-01	2021-02-28	B002	T102      	110	20	40	40
21-0013	SB1003	21-001	2021-03-01	2021-03-31	B003	T103      	120	25	40	35
21-0014	SB1004	21-001	2021-04-01	2021-04-30	B004	T101      	130	30	40	30
21-0031	SB1001	21-003	2021-05-01	2021-05-31	B005	T102      	140	10	45	45
21-0032	SB1002	21-003	2021-06-01	2021-06-30	B001	T103      	100	20	40	40
21-0033	SB1003	21-003	2021-07-01	2021-07-31	B002	T101      	110	25	40	35
21-0034	SB1004	21-003	2021-08-01	2021-09-30	B003	T102      	120	30	40	30
21-0021	SB2001	21-002	2021-01-01	2021-01-31	B005	T104      	110	10	45	45
21-0022	SB2002	21-002	2021-02-01	2021-02-28	B006	T105      	120	20	40	40
21-0023	SB2003	21-002	2021-03-01	2021-03-31	B007	T106      	130	25	40	35
21-0024	SB2004	21-002	2021-04-01	2021-04-30	B008	T104      	140	30	40	30
21-0041	SB2004	21-004	2021-05-01	2021-05-31	B005	T105      	100	10	45	45
21-0042	SB2004	21-004	2021-06-01	2021-06-30	B006	T106      	110	20	40	40
21-0043	SB2004	21-004	2021-07-01	2021-07-31	B007	T104      	120	25	40	35
21-0044	SB2004	21-004	2021-08-01	2021-09-30	B008	T105      	130	30	40	30
*/



-- 성적입력(성적 UPDATE) - 중호
EXEC PRC_GRADE_UPDATE('21-0011', 'S211001', 10, 40, 43);
EXEC PRC_GRADE_UPDATE('21-0012', 'S211001', 20, 35, 35);
EXEC PRC_GRADE_UPDATE('21-0013', 'S211001', 25, 40, 34);
EXEC PRC_GRADE_UPDATE('21-0014', 'S211001', 30, 38, 30); 
-->김진령 개발자 양성과정A
EXEC PRC_GRADE_UPDATE('21-0031', 'S211002', 10, 45, 40);
EXEC PRC_GRADE_UPDATE('21-0032', 'S211002', 19, 36, 40);
EXEC PRC_GRADE_UPDATE('21-0033', 'S211002', 23, 37, 32);
-->박효빈 개발자 양성과정B    -- 중도탈락자
EXEC PRC_GRADE_UPDATE('21-0011', 'S211003', 8, 32, 42); 
EXEC PRC_GRADE_UPDATE('21-0012', 'S211003', 20, 40, 36); 
EXEC PRC_GRADE_UPDATE('21-0013', 'S211003', 23, 36, 34); 
EXEC PRC_GRADE_UPDATE('21-0014', 'S211003', 27, 37, 23); 
-->손범석 개발자 양성과정A
EXEC PRC_GRADE_UPDATE('21-0031', 'S211004', 9, 43, 45);
EXEC PRC_GRADE_UPDATE('21-0032', 'S211004', 18, 32, 38);
EXEC PRC_GRADE_UPDATE('21-0033', 'S211004', 22, 39, 33);
EXEC PRC_GRADE_UPDATE('21-0034', 'S211004', 26, 32, 30); 
-->이윤서 개발자 양성과정B
EXEC PRC_GRADE_UPDATE('21-0011', 'S211005', 10, 43, 45); 
EXEC PRC_GRADE_UPDATE('21-0012', 'S211005', 18, 36, 36); 
EXEC PRC_GRADE_UPDATE('21-0013', 'S211005', 23, 37, 31); 
EXEC PRC_GRADE_UPDATE('21-0014', 'S211005', 30, 36, 27); 
-->이중호 개발자 양성과정A
EXEC PRC_GRADE_UPDATE('21-0031', 'S211006', 10, 45, 45);
EXEC PRC_GRADE_UPDATE('21-0032', 'S211006', 20, 32, 36);
EXEC PRC_GRADE_UPDATE('21-0033', 'S211006', 21, 35, 33);
EXEC PRC_GRADE_UPDATE('21-0034', 'S211006', 27, 37, 26); 
-->최수지 개발자 양성과정B
EXEC PRC_GRADE_UPDATE('21-0021', 'S211011', 10, 39, 40);
EXEC PRC_GRADE_UPDATE('21-0022', 'S211011', 19, 35, 35);
EXEC PRC_GRADE_UPDATE('21-0023', 'S211011', 24, 39, 31);
EXEC PRC_GRADE_UPDATE('21-0024', 'S211011', 23, 40, 30); 
--홍길동 디자이너 양성과정A
EXEC PRC_GRADE_UPDATE('21-0041', 'S211012', 10, 40, 45);
EXEC PRC_GRADE_UPDATE('21-0042', 'S211012', 19, 35, 34);
EXEC PRC_GRADE_UPDATE('21-0043', 'S211012', 25, 40, 31);
EXEC PRC_GRADE_UPDATE('21-0044', 'S211012', 23, 40, 29); 
-->고길동 디자이너 양성과정A
EXEC PRC_GRADE_UPDATE('21-0021', 'S211013', 8, 45, 37);
EXEC PRC_GRADE_UPDATE('21-0022', 'S211013', 20, 40, 40);
EXEC PRC_GRADE_UPDATE('21-0023', 'S211013', 21, 32, 35);
EXEC PRC_GRADE_UPDATE('21-0024', 'S211013', 30, 35, 30); 
-->손예진 디자이너 양성과정B
EXEC PRC_GRADE_UPDATE('21-0041', 'S211014', 9, 39, 40);
EXEC PRC_GRADE_UPDATE('21-0042', 'S211014', 20, 28, 39);
EXEC PRC_GRADE_UPDATE('21-0043', 'S211014', 25, 40, 35);    
-->김예진 디자이너 양성과정B -- 중도탈락자

--==>> PL/SQL 프로시저가 성공적으로 완료되었습니다. * 48


-- 성적 배점 PRC_GRADE_UPDATE 프로시저 작동 확인
EXEC PRC_GRADE_UPDATE('21-0043', 'S211014', 70, 10, 20); 
--==>> 에러 발생~!
/*
ORA-20009: 배점보다 점수가 높습니다.
*/


-- 성적 입력 확인
SELECT *
FROM GRADE G, REGISTRATION R
WHERE G.REGISTRATION_ID = R.REGISTRATION_ID;
--==>>
/*
21-0011	R10001	10	40	43	R10001	S211001   	21-001	2020-12-20
21-0012	R10001	20	35	35	R10001	S211001   	21-001	2020-12-20
21-0013	R10001	25	40	34	R10001	S211001   	21-001	2020-12-20
21-0014	R10001	30	38	30	R10001	S211001   	21-001	2020-12-20
21-0031	R10002	10	45	40	R10002	S211002   	21-003	2021-04-16
21-0032	R10002	19	36	40	R10002	S211002   	21-003	2021-04-16
21-0033	R10002	23	37	32	R10002	S211002   	21-003	2021-04-16
21-0011	R10003	8	32	42	R10003	S211003   	21-001	2020-12-05
21-0012	R10003	20	40	36	R10003	S211003   	21-001	2020-12-05
21-0013	R10003	23	36	34	R10003	S211003   	21-001	2020-12-05
21-0014	R10003	27	37	23	R10003	S211003   	21-001	2020-12-05
21-0031	R10004	9	43	45	R10004	S211004   	21-003	2021-04-12
21-0032	R10004	18	32	38	R10004	S211004   	21-003	2021-04-12
21-0033	R10004	22	39	33	R10004	S211004   	21-003	2021-04-12
21-0034	R10004	26	32	30	R10004	S211004   	21-003	2021-04-12
21-0011	R10005	10	43	45	R10005	S211005   	21-001	2021-12-03
21-0012	R10005	18	36	36	R10005	S211005   	21-001	2021-12-03
21-0013	R10005	23	37	31	R10005	S211005   	21-001	2021-12-03
21-0014	R10005	30	36	27	R10005	S211005   	21-001	2021-12-03
21-0031	R10006	10	45	45	R10006	S211006   	21-003	2021-04-01
21-0032	R10006	20	32	36	R10006	S211006   	21-003	2021-04-01
21-0033	R10006	21	35	33	R10006	S211006   	21-003	2021-04-01
21-0034	R10006	27	37	26	R10006	S211006   	21-003	2021-04-01
21-0021	R10007	10	39	40	R10007	S211011   	21-002	2020-12-21
21-0022	R10007	19	35	35	R10007	S211011   	21-002	2020-12-21
21-0023	R10007	24	39	31	R10007	S211011   	21-002	2020-12-21
21-0024	R10007	23	40	30	R10007	S211011   	21-002	2020-12-21
21-0041	R10008	10	40	45	R10008	S211012   	21-004	2021-04-25
21-0042	R10008	19	35	34	R10008	S211012   	21-004	2021-04-25
21-0043	R10008	25	40	31	R10008	S211012   	21-004	2021-04-25
21-0044	R10008	23	40	29	R10008	S211012   	21-004	2021-04-25
21-0021	R10009	8	45	37	R10009	S211013   	21-002	2020-12-15
21-0022	R10009	20	40	40	R10009	S211013   	21-002	2020-12-15
21-0023	R10009	21	32	35	R10009	S211013   	21-002	2020-12-15
21-0024	R10009	30	35	30	R10009	S211013   	21-002	2020-12-15
21-0041	R10010	9	39	40	R10010	S211014   	21-004	2021-04-07
21-0042	R10010	20	28	39	R10010	S211014   	21-004	2021-04-07
21-0043	R10010	25	40	35	R10010	S211014   	21-004	2021-04-07
*/


-------------------------------------------------------

SELECT OPEN_SUBJECT_ID, FN_SUBJECT_NAME(OPEN_SUBJECT_ID), SUBJECT_STARTDATE, SUBJECT_ENDDATE
FROM OPEN_SUBJECT
WHERE TUTOR_ID = 'T101';
--==>>
/*
21-0011	자바	2021-01-01	2021-01-31
21-0014	스프링	2021-04-01	2021-04-30
21-0033	HTML	2021-07-01	2021-07-31
*/

UPDATE OPEN_SUBJECT
SET TUTOR_ID='T104'
WHERE OPEN_SUBJECT_ID = '21-0021';
--==>> 1 행 이(가) 업데이트되었습니다.

SELECT TUTOR_ID
FROM OPEN_SUBJECT
WHERE OPEN_SUBJECT_ID = '21-0021';
--==>> T104      

-- 성적정보수정
UPDATE GRADE
SET ATTENDANCE_SCORE = 20, PRACTICAL_SCORE = 30, WRITTEN_SCORE = 20
WHERE OPEN_SUBJECT_ID = '21-0011'
AND REGISTRATION_ID = (SELECT REGISTRATION_ID
                       FROM   REGISTRATION
                       WHERE  STUDENT_ID ='S211001');
--==>> 1 행 이(가) 업데이트되었습니다.

SELECT *
FROM VIEW_GRADE
WHERE "개설과목ID" = '21-0011'
  AND "학생명" = FN_STUDENT_NAME('S211001');
--==>>김진령	21-001	개발자	21-0011	자바	2021-01-01	2021-01-31	자바의정석	20	30	20	70	1


SELECT (SELECT FN_STUDENT_NAME(STUDENT_ID)
        FROM REGISTRATION R
        WHERE R.REGISTRATION_ID = G.REGISTRATION_ID) "학생명"
     , ATTENDANCE_SCORE "출결", PRACTICAL_SCORE "실기", WRITTEN_SCORE "필기" 
FROM GRADE G
WHERE OPEN_SUBJECT_ID = '21-0011';
--==>>
/*
김진령	20	30	20
손범석	8	32	42
이중호	10	43	45
*/

SELECT SUBJECT_ENDDATE
FROM OPEN_SUBJECT
WHERE TUTOR_ID = 'T101' AND OPEN_SUBJECT_ID = '21-0011';
--==>> 2021-01-31


UPDATE COURSE
SET    COURSE_ID = 'C15'
WHERE  COURSE_NAME = '디자이너';
--==>> 1 행 이(가) 업데이트되었습니다.

SELECT *
FROM OPEN_COURSE;
--==>>
/*
21-001	C10	2021-01-01	2021-04-30
21-002	C15	2021-01-01	2021-04-30
21-003	C10	2021-05-01	2021-09-30
21-004	C15	2021-05-01	2021-09-30
*/

-- 성적정보 삭제
UPDATE GRADE
SET ATTENDANCE_SCORE = NULL, PRACTICAL_SCORE = NULL, WRITTEN_SCORE = NULL
WHERE OPEN_SUBJECT_ID = '21-0013' 
AND REGISTRATION_ID = (SELECT REGISTRATION_ID
                       FROM   REGISTRATION
                       WHERE  STUDENT_ID ='S211003' );
--==>> 1 행 이(가) 업데이트되었습니다.

SELECT *
FROM VIEW_GRADE
WHERE "개설과목ID" = '21-0013'
  AND "학생명" = FN_STUDENT_NAME('S211003');
--==>>
/*
손범석	21-001	개발자	21-0013	HTML	2021-03-01	2021-03-31	HTML의정석	(null)	(null)	(null)	(null)	1
*/


UPDATE TUTOR
SET    TUTOR_ID = 'T111'
WHERE  TUTOR_NAME = '고민영';
--==>> 1 행 이(가) 업데이트되었습니다. 

SELECT *
FROM OPEN_SUBJECT
WHERE TUTOR_ID = 'T111';
--==>>
/*
21-0011	SB1001	21-001	2021-01-01	2021-01-31	B001	T111      	100	10	45	45
21-0014	SB1004	21-001	2021-04-01	2021-04-30	B004	T111      	130	30	40	30
21-0033	SB1003	21-003	2021-07-01	2021-07-31	B002	T111      	110	25	40	35
*/

UPDATE STUDENT
SET    STUDENT_ID = 'S211015'
WHERE  STUDENT_NAME = '김진령';

SELECT *
FROM STUDENT;
--==>>
/*
S211015   	김진령	9701012345678	2345678
S211002   	박효빈	9701022456789	2456789
S211003   	손범석	9602021234567	1234567
S211004   	이윤서	9503032567891	2567891
S211005   	이중호	9702031345678	1345678
S211006   	최수지	9605042053014	2053014
S211011   	홍길동	0011013456789	3456789
S211012   	고길동	0105053567891	3567891
S211013   	손예진	0107074567891	4567891
S211014   	김예진	9808082123456	2123456
*/

UPDATE SUBJECT
SET SUBJECT_ID='SB2005'
WHERE SUBJECT_NAME='디자인툴4';
--==>> 1 행 이(가) 업데이트되었습니다.

SELECT *
FROM SUBJECT;
--==>>
/*
SB1001	자바
SB1002	오라클
SB1003	HTML
SB1004	스프링
SB2001	디자인툴1
SB2002	디자인툴2
SB2003	디자인툴3
SB2005	디자인툴4
*/

